{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ai-agents.dev/schemas/session-progress.json",
  "title": "Session Progress Schema",
  "description": "Tracks cross-session state for long-running agent projects, enabling session continuity and preventing redundant discovery",
  "type": "object",
  "required": ["project_name", "last_session", "current_phase", "git_baseline"],
  "properties": {
    "project_name": {
      "type": "string",
      "description": "The name of the project being worked on"
    },
    "last_session": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp of the last agent session (ISO 8601 format)",
      "example": "2024-01-15T10:30:00Z"
    },
    "current_phase": {
      "type": "string",
      "description": "Current phase or focus area of development",
      "example": "authentication-implementation"
    },
    "completed_tasks": {
      "type": "array",
      "description": "List of task IDs that have been completed",
      "items": {
        "type": "string",
        "pattern": "^[A-Z]+-[0-9]+$"
      },
      "example": ["AUTH-001", "AUTH-002"]
    },
    "active_tasks": {
      "type": "array",
      "description": "List of task IDs currently in progress",
      "items": {
        "type": "string",
        "pattern": "^[A-Z]+-[0-9]+$"
      },
      "example": ["AUTH-003"]
    },
    "blockers": {
      "type": "array",
      "description": "Current blockers preventing progress",
      "items": {
        "type": "object",
        "required": ["task_id", "description"],
        "properties": {
          "task_id": {
            "type": "string",
            "description": "The task ID that is blocked"
          },
          "description": {
            "type": "string",
            "description": "Description of the blocker"
          },
          "severity": {
            "type": "string",
            "enum": ["low", "medium", "high", "critical"],
            "default": "medium"
          },
          "reported_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      }
    },
    "next_priorities": {
      "type": "array",
      "description": "Ordered list of task IDs to work on next",
      "items": {
        "type": "string",
        "pattern": "^[A-Z]+-[0-9]+$"
      },
      "example": ["AUTH-004", "AUTH-005"]
    },
    "git_baseline": {
      "type": "string",
      "description": "Git commit SHA of the baseline for this session",
      "pattern": "^[a-f0-9]{7,40}$",
      "example": "abc123def456"
    },
    "notes": {
      "type": "string",
      "description": "Free-form notes about current state and context",
      "example": "Login form complete, needs backend integration"
    },
    "session_history": {
      "type": "array",
      "description": "History of previous sessions",
      "items": {
        "type": "object",
        "required": ["session_id", "timestamp", "tasks_completed"],
        "properties": {
          "session_id": {
            "type": "string",
            "description": "Unique identifier for the session"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "When the session occurred"
          },
          "tasks_completed": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Task IDs completed in this session"
          },
          "duration_minutes": {
            "type": "number",
            "description": "Duration of the session in minutes"
          },
          "summary": {
            "type": "string",
            "description": "Summary of what was accomplished"
          }
        }
      }
    },
    "metrics": {
      "type": "object",
      "description": "Project metrics and statistics",
      "properties": {
        "total_sessions": {
          "type": "integer",
          "description": "Total number of sessions for this project",
          "minimum": 0
        },
        "total_features": {
          "type": "integer",
          "description": "Total number of features planned",
          "minimum": 0
        },
        "features_completed": {
          "type": "integer",
          "description": "Number of features marked as passing",
          "minimum": 0
        },
        "features_failing": {
          "type": "integer",
          "description": "Number of features currently failing",
          "minimum": 0
        },
        "test_coverage_percent": {
          "type": "number",
          "description": "Percentage of code covered by tests",
          "minimum": 0,
          "maximum": 100
        }
      }
    }
  },
  "examples": [
    {
      "project_name": "user-authentication-system",
      "last_session": "2024-01-15T10:30:00Z",
      "current_phase": "authentication-implementation",
      "completed_tasks": ["AUTH-001", "AUTH-002"],
      "active_tasks": ["AUTH-003"],
      "blockers": [
        {
          "task_id": "AUTH-004",
          "description": "JWT library dependency not installed",
          "severity": "high",
          "reported_at": "2024-01-15T09:00:00Z"
        }
      ],
      "next_priorities": ["AUTH-004", "AUTH-005"],
      "git_baseline": "abc123def456",
      "notes": "Login form complete, needs backend integration. OAuth provider setup pending.",
      "session_history": [
        {
          "session_id": "session-001",
          "timestamp": "2024-01-14T14:00:00Z",
          "tasks_completed": ["AUTH-001", "AUTH-002"],
          "duration_minutes": 120,
          "summary": "Implemented user registration and basic validation"
        }
      ],
      "metrics": {
        "total_sessions": 1,
        "total_features": 12,
        "features_completed": 2,
        "features_failing": 0,
        "test_coverage_percent": 45.5
      }
    }
  ]
}
