# AI Agents Configuration for Web Application Project
# Example configuration WITH Scrum Master enabled for project tracking
# This demonstrates how to enable AppFlowy integration for visibility

project_id: "ecommerce-web-app"
project_name: "E-Commerce Web Application"
description: "Full-stack e-commerce platform with React frontend and Node.js backend"

# Agent Library Configuration
agent_library:
  repo: "git@github.com:org/AI_agents.git"
  version: "1.0.0"
  update_strategy: "auto_patch"  # auto-update patch versions (1.0.x)

# Agent Definitions
agents:
  # Manager Agent - Coordinates the team
  team_manager:
    base: "base/manager.md"
    project_context:
      - ".ai-agents/context/architecture.md"
      - ".ai-agents/workflows/feature-development.md"
    tools:
      - "tools/communication-tools.md"
    # Skills: Communication and documentation for team coordination
    skills:
      - "communication/internal-comms"  # Team status updates, reports
      - "documents/pptx"                # Presentations for stakeholders
      - "core/skill-creator"            # Understanding team capabilities
    memory:
      enabled: true
      retention_policy: "high_priority"
    coordination:
      manages:
        - "frontend_developer"
        - "backend_developer"
        - "qa_tester"
      # Note: Manager delegates to Scrum Master for tracking, not direct management
      delegates_tracking_to: "scrum_master"
    model:
      provider: "anthropic"
      model_name: "claude-sonnet-4-5"
      temperature: 0.7

  # Frontend Developer
  frontend_developer:
    base: "base/software-developer.md"
    platforms:
      - "platforms/web/frontend-developer.md"
    project_context:
      - ".ai-agents/context/architecture.md"
      - ".ai-agents/context/coding-standards.md"
      - ".ai-agents/context/api-contracts.md"
    tools:
      - "tools/git-tools.md"
      - "tools/testing-tools.md"
    # Skills: Frontend development and testing
    skills:
      - "core/web-artifacts-builder"  # PRIMARY: React components, UI development
      - "core/webapp-testing"         # Component and E2E testing
      - "design/theme-factory"        # Professional UI styling
    memory:
      enabled: true
      retention_policy: "high_priority"
    coordination:
      reports_to: "team_manager"
      collaborates_with:
        - "backend_developer"
    model:
      provider: "anthropic"
      model_name: "claude-sonnet-4-5"
      temperature: 0.5

  # Backend Developer
  backend_developer:
    base: "base/software-developer.md"
    platforms:
      - "platforms/web/backend-developer.md"
    project_context:
      - ".ai-agents/context/architecture.md"
      - ".ai-agents/context/coding-standards.md"
      - ".ai-agents/context/api-contracts.md"
      - ".ai-agents/context/database-schema.md"
    tools:
      - "tools/git-tools.md"
      - "tools/testing-tools.md"
      - "tools/build-tools.md"
    # Skills: Backend development and integrations
    skills:
      - "core/mcp-builder"      # PRIMARY: MCP servers, API integrations
      - "core/webapp-testing"   # API testing
      - "documents/xlsx"        # Data exports and reports
    memory:
      enabled: true
      retention_policy: "high_priority"
    coordination:
      reports_to: "team_manager"
      collaborates_with:
        - "frontend_developer"
    model:
      provider: "anthropic"
      model_name: "claude-sonnet-4-5"
      temperature: 0.5

  # QA Tester
  qa_tester:
    base: "base/qa-tester.md"
    platforms:
      - "platforms/web/frontend-developer.md"  # Needs web knowledge for E2E testing
    project_context:
      - ".ai-agents/context/test-plan.md"
      - ".ai-agents/context/requirements.md"
    tools:
      - "tools/testing-tools.md"
    # Skills: Testing and reporting
    skills:
      - "core/webapp-testing"  # PRIMARY: E2E testing with Playwright
      - "documents/xlsx"       # Test data and results tracking
      - "documents/pdf"        # Test reports and deliverables
    memory:
      enabled: true
      retention_policy: "medium_priority"
    coordination:
      reports_to: "team_manager"
    model:
      provider: "anthropic"
      model_name: "claude-sonnet-4-5"
      temperature: 0.3

  # Scrum Master - Project tracking and visibility
  scrum_master:
    enabled: true  # ✅ ENABLED for project tracking
    base: "base/scrum-master.md"
    project_context:
      - ".ai-agents/context/requirements.md"
    tools:
      - "tools/communication-tools.md"
    # Skills: Project tracking and reporting
    skills:
      - "custom/appflowy-integration"  # PRIMARY: AppFlowy task tracking
      - "documents/xlsx"               # Sprint reports and metrics
      - "documents/pptx"               # Stakeholder presentations
    memory:
      enabled: true
      retention_policy: "high_priority"
    coordination:
      collaborates_with:
        - "team_manager"  # Receives task breakdown, reports status
      monitors:
        - "frontend_developer"
        - "backend_developer"
        - "qa_tester"
    model:
      provider: "anthropic"
      model_name: "claude-sonnet-4-5"
      temperature: 0.4
    # AppFlowy-specific configuration
    appflowy:
      auto_sync: true
      daily_summary_time: "17:00"  # Generate daily summary at 5 PM
      sprint_length_days: 7
      velocity_tracking: true

# Project-Specific Configuration
project:
  tech_stack:
    frontend:
      - "React"
      - "TypeScript"
      - "Redux Toolkit"
      - "React Router"
      - "TailwindCSS"
    backend:
      - "Node.js"
      - "Express"
      - "TypeScript"
      - "Prisma"
    database:
      - "PostgreSQL"
      - "Redis"
    infrastructure:
      - "Docker"
      - "AWS"
      - "GitHub Actions"

  coding_standards:
    linter: "ESLint"
    formatter: "Prettier"
    style_guide: "Airbnb"
    test_framework: "Jest + React Testing Library"
    min_test_coverage: 80

  git_workflow:
    main_branch: "main"
    development_branch: "develop"
    branch_naming: "feature/<feature-name>/agent/<agent-role>/<task>"
    commit_message_format: "conventional"
    require_pr: true

  quality_gates:
    require_tests: true
    require_code_review: true
    require_passing_ci: true
    block_on_lint_errors: true
    min_test_coverage: 80

  ci_cd:
    provider: "github_actions"
    test_on:
      - "push"
      - "pr"
    deploy_on:
      - "main"

# Context Files (project-specific)
context_files:
  architecture: ".ai-agents/context/architecture.md"
  coding_standards: ".ai-agents/context/coding-standards.md"
  api_contracts: ".ai-agents/context/api-contracts.md"
  business_logic: ".ai-agents/context/business-logic.md"
  type_definitions: ".ai-agents/context/type-definitions.md"

# State Management
state_management:
  state_file: ".ai-agents/state/project-state.json"
  checkpoint_dir: ".ai-agents/checkpoints"
  memory_dir: ".ai-agents/memory"
  # Additional state for Scrum Master
  team_communication_file: ".ai-agents/state/team-communication.json"

# Notifications (optional)
notifications:
  slack:
    webhook_url: "${SLACK_WEBHOOK_URL}"  # Use environment variable
    channel: "#dev-team"
    notify_on:
      - "blocker"
      - "error"
      - "deployment"
      - "sprint_complete"  # Additional notification for sprint completion

# Feature Flags
features:
  # ✅ Scrum Master tracking ENABLED
  scrum_master_tracking:
    enabled: true
    # AppFlowy connection (set these environment variables)
    appflowy_url: "${APPFLOWY_API_URL}"  # Example: http://192.168.1.100:8080
    appflowy_workspace_id: "${APPFLOWY_WORKSPACE_ID}"  # From workspace setup
    appflowy_database_id: "${APPFLOWY_TASKS_DB_ID}"  # Tasks database ID
    # Sync configuration
    sync_interval: "on_task_complete"  # Options: daily, hourly, on_task_complete
    auto_create_tasks: true  # Automatically create AppFlowy tasks from Manager's plan
    daily_summary: true  # Generate daily standup summaries
    sprint_reports: true  # Generate sprint velocity and completion reports

# Environment Variables Required for Scrum Master:
# export APPFLOWY_API_URL="http://your-appflowy-server:8080"
# export APPFLOWY_API_TOKEN="your-jwt-token"
# export APPFLOWY_WORKSPACE_ID="workspace-123"
# export APPFLOWY_TASKS_DB_ID="database-456"
#
# To get these values, run:
# cd skills/custom/appflowy-integration/scripts
# python workspace_setup.py --project "E-Commerce Web Application"
