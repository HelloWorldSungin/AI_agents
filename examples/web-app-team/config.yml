# AI Agents Configuration for Web Application Project
# This is an example configuration showing how to use the AI agents library

project_id: "ecommerce-web-app"
project_name: "E-Commerce Web Application"
description: "Full-stack e-commerce platform with React frontend and Node.js backend"

# Agent Library Configuration
agent_library:
  repo: "git@github.com:org/AI_agents.git"
  version: "1.0.0"
  update_strategy: "auto_patch"  # auto-update patch versions (1.0.x)

# Agent Definitions
agents:
  # Manager Agent - Coordinates the team
  team_manager:
    base: "base/manager.md"
    project_context:
      - ".ai-agents/context/architecture.md"
      - ".ai-agents/workflows/feature-development.md"
    tools:
      - "tools/communication-tools.md"
    # Skills: Communication and documentation for team coordination
    skills:
      - "communication/internal-comms"  # Team status updates, reports
      - "documents/pptx"                # Presentations for stakeholders
      - "core/skill-creator"            # Understanding team capabilities
    memory:
      enabled: true
      retention_policy: "high_priority"
    coordination:
      manages:
        - "frontend_developer"
        - "backend_developer"
        - "qa_tester"
    model:
      provider: "anthropic"
      model_name: "claude-sonnet-4-5"
      temperature: 0.7

  # Frontend Developer
  frontend_developer:
    base: "base/software-developer.md"
    platforms:
      - "platforms/web/frontend-developer.md"
    project_context:
      - ".ai-agents/context/architecture.md"
      - ".ai-agents/context/coding-standards.md"
      - ".ai-agents/context/api-contracts.md"
    tools:
      - "tools/git-tools.md"
      - "tools/testing-tools.md"
    # Skills: Frontend development and testing
    skills:
      - "core/web-artifacts-builder"  # PRIMARY: React components, UI development
      - "core/webapp-testing"         # Component and E2E testing
      - "design/theme-factory"        # Professional UI styling
    memory:
      enabled: true
      retention_policy: "high_priority"
    coordination:
      reports_to: "team_manager"
      collaborates_with:
        - "backend_developer"
    model:
      provider: "anthropic"
      model_name: "claude-sonnet-4-5"
      temperature: 0.5

  # Backend Developer
  backend_developer:
    base: "base/software-developer.md"
    platforms:
      - "platforms/web/backend-developer.md"
    project_context:
      - ".ai-agents/context/architecture.md"
      - ".ai-agents/context/coding-standards.md"
      - ".ai-agents/context/api-contracts.md"
      - ".ai-agents/context/database-schema.md"
    tools:
      - "tools/git-tools.md"
      - "tools/testing-tools.md"
      - "tools/build-tools.md"
    # Skills: Backend development and integrations
    skills:
      - "core/mcp-builder"      # PRIMARY: MCP servers, API integrations
      - "core/webapp-testing"   # API testing
      - "documents/xlsx"        # Data exports and reports
    memory:
      enabled: true
      retention_policy: "high_priority"
    coordination:
      reports_to: "team_manager"
      collaborates_with:
        - "frontend_developer"
    model:
      provider: "anthropic"
      model_name: "claude-sonnet-4-5"
      temperature: 0.5

  # QA Tester
  qa_tester:
    base: "base/qa-tester.md"
    platforms:
      - "platforms/web/frontend-developer.md"  # Needs web knowledge for E2E testing
    project_context:
      - ".ai-agents/context/test-plan.md"
      - ".ai-agents/context/requirements.md"
    tools:
      - "tools/testing-tools.md"
    # Skills: Testing and reporting
    skills:
      - "core/webapp-testing"  # PRIMARY: E2E testing with Playwright
      - "documents/xlsx"       # Test data and results tracking
      - "documents/pdf"        # Test reports and deliverables
    memory:
      enabled: true
      retention_policy: "medium_priority"
    coordination:
      reports_to: "team_manager"
    model:
      provider: "anthropic"
      model_name: "claude-sonnet-4-5"
      temperature: 0.3

  # Scrum Master (Optional - for project tracking and visibility)
  scrum_master:
    enabled: false  # Set to true to enable project tracking
    base: "base/scrum-master.md"
    project_context:
      - ".ai-agents/context/requirements.md"
    tools:
      - "tools/communication-tools.md"
    # Skills: Project tracking and reporting
    skills:
      - "custom/appflowy-integration"  # PRIMARY: AppFlowy task tracking
      - "documents/xlsx"               # Sprint reports and metrics
      - "documents/pptx"               # Stakeholder presentations
    memory:
      enabled: true
      retention_policy: "high_priority"
    coordination:
      collaborates_with:
        - "team_manager"
      monitors:
        - "frontend_developer"
        - "backend_developer"
        - "qa_tester"
    model:
      provider: "anthropic"
      model_name: "claude-sonnet-4-5"
      temperature: 0.4

# Project-Specific Configuration
project:
  tech_stack:
    frontend:
      - "React"
      - "TypeScript"
      - "Redux Toolkit"
      - "React Router"
      - "TailwindCSS"
    backend:
      - "Node.js"
      - "Express"
      - "TypeScript"
      - "Prisma"
    database:
      - "PostgreSQL"
      - "Redis"
    infrastructure:
      - "Docker"
      - "AWS"
      - "GitHub Actions"

  coding_standards:
    linter: "ESLint"
    formatter: "Prettier"
    style_guide: "Airbnb"
    test_framework: "Jest + React Testing Library"
    min_test_coverage: 80

  git_workflow:
    main_branch: "main"
    development_branch: "develop"
    branch_naming: "feature/<feature-name>/agent/<agent-role>/<task>"
    commit_message_format: "conventional"
    require_pr: true

  quality_gates:
    require_tests: true
    require_code_review: true
    require_passing_ci: true
    block_on_lint_errors: true
    min_test_coverage: 80

  ci_cd:
    provider: "github_actions"
    test_on:
      - "push"
      - "pr"
    deploy_on:
      - "main"

# Context Files (project-specific)
context_files:
  architecture: ".ai-agents/context/architecture.md"
  coding_standards: ".ai-agents/context/coding-standards.md"
  api_contracts: ".ai-agents/context/api-contracts.md"
  business_logic: ".ai-agents/context/business-logic.md"
  type_definitions: ".ai-agents/context/type-definitions.md"

# State Management
state_management:
  state_file: ".ai-agents/state/project-state.json"
  checkpoint_dir: ".ai-agents/checkpoints"
  memory_dir: ".ai-agents/memory"

# Notifications (optional)
notifications:
  slack:
    webhook_url: "${SLACK_WEBHOOK_URL}"  # Use environment variable
    channel: "#dev-team"
    notify_on:
      - "blocker"
      - "error"
      - "deployment"

# Feature Flags
features:
  # Enable Scrum Master for project tracking (requires AppFlowy setup)
  scrum_master_tracking:
    enabled: false  # Set to true and configure scrum_master agent above
    appflowy_url: "${APPFLOWY_API_URL}"  # e.g., http://localhost:8080
    appflowy_workspace_id: "${APPFLOWY_WORKSPACE_ID}"
    sync_interval: "daily"  # How often to sync with AppFlowy (daily, hourly, on_task_complete)

# External State Provider Configuration
# Enables session continuity across context resets
state_provider:
  type: "linear"  # linear, github, notion, file
  api_key_env: "LINEAR_API_KEY"
  team_id: "${LINEAR_TEAM_ID}"  # Optional, auto-detected if not set
  project_name: "E-Commerce Web App"
  meta_issue_label: "meta"

# Execution Modes Configuration
# Configure agent autonomy level
execution:
  mode: "interactive"  # autonomous, interactive, supervised
  checkpoints:
    turn_interval: 50  # Pause every 50 turns (0 = disabled)
    before_new_issue: true
    after_issue_complete: false
    on_regression_failure: true
    on_blocker: true
    on_uncertainty: true
  approval:
    timeout_minutes: 60
    default_action: "pause"
    notification:
      cli: true
      slack_webhook: "${SLACK_WEBHOOK_URL}"
      linear_comment: true
  limits:
    max_turns_per_session: 500
    max_files_modified: 50
    context_warning_threshold: 0.7
    context_pause_threshold: 0.85

# Session Management
session:
  continuity_enabled: true
  meta_issue_enabled: true
  regression_testing: "required"  # required, recommended, disabled

# Security Configuration
security:
  allowed_commands:
    - "git"
    - "npm"
    - "node"
    - "npx"
    - "yarn"
    - "docker"
    - "docker-compose"
  blocked_commands:
    - "rm -rf /"
    - "sudo"
    - "git push --force"
  blocked_patterns:
    - "curl.*\\|.*bash"
    - "wget.*\\|.*sh"
  allow_network: true
  log_blocked: true

# Visual Verification (for UI tasks)
visual_verification:
  requirement: "required"  # required, recommended, disabled
  browser_tool: "puppeteer"
  viewports:
    - name: "mobile"
      width: 375
      height: 667
    - name: "tablet"
      width: 768
      height: 1024
    - name: "desktop"
      width: 1920
      height: 1080
  evidence_dir: ".ai-agents/evidence"

# Regression Testing Configuration
regression:
  on_session_start: true
  before_new_task: "smoke"  # smoke, standard, full, none
  after_implementation: "standard"
  before_push: "full"
  commands:
    smoke: "npm test -- --grep '@smoke'"
    standard: "npm test"
    full: "npm run test:all"
  on_failure:
    priority: 1
    block_new_work: true
